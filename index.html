<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEP FOOD ‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏≠‡∏î55</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #c92d22;
            color: white;
            text-align: center;
            padding: 15px 0;
        }
        .main-layout {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 30px auto;
        }
        .queue-container {
            width: 280px;
            max-height: 85vh;
            overflow-y: auto;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.3);
            flex-shrink: 0;
            position: sticky;
            top: 20px;
        }
        .queue-container h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
            text-align: center;
            color: #c92d22;
        }
        .queue-item {
            border-bottom: 1px solid #ddd;
            padding: 8px 0;
            font-size: 14px;
        }
        .queue-item:last-child {
            border-bottom: none;
        }
        .container {
            flex: 1;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
        }
        .tabs {
            display: flex;
            justify-content: left;
            margin-bottom: 20px;
            border-bottom: 2px solid #f44336;
            padding-bottom: 10px;
        }
        .tablink {
            background-color: #fff;
            color: #555;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            border-radius: 10px 10px 0 0;
            transition: background-color 0.3s, color 0.3s;
            margin-right: 10px;
        }
        .tablink:hover {
            background-color: #ddd;
        }
        .tablink.active {
            background-color: #f44336;
            color: white;
        }
        .menu {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
        }
        .item {
            background-color: #fff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .order-list {
            margin-top: 20px;
            border-top: 2px solid #f44336;
            padding-top: 20px;
        }
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        .total {
            text-align: right;
            font-weight: bold;
            margin-top: 10px;
            font-size: 20px;
            color: #333;
        }
        .payment-button {
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .payment-button:hover {
            background-color: #c62828;
        }
        .notification {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #f44336;
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 999;
        }
        @media (max-width: 900px) {
            .main-layout { flex-direction: column; }
            .queue-container { width: 100%; max-height: none; position: relative; }
        }

                .checkout {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #f44336;
        }
        .payment-button {
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .payment-button:hover {
            background-color: #c62828;
        }
        .cancel-button {
            background-color: #9e9e9e;
            color: #333;
            border: none;
            border-radius: 5px;
            padding: 12px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .cancel-button:hover {
            background-color: #757575;
        }
        .add-remove-button {
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .add-remove-button:hover {
            background-color: #45a049;
        }
        .remove-button {
            background-color: #f44336;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .remove-button:hover {
            background-color: #c62828;
        }

        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.4); 
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 80%; 
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        @media (max-width: 600px) {
            .menu {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

    </style>
</head>
<body>
<header>
    <img src="images/lukchin.jpg" alt="alternatetext" style="width:250px;height:50px;">
</header>

<div class="main-layout">
    <!-- ‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå -->
    <div class="queue-container">
        <h3>‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
        <div id="queue-list"></div>
    </div>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π + ‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå -->
    <div class="container">
        <div class="tabs">
            <button class="tablink active" onclick="openTab(event, 'food-menu')">‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
            <button class="tablink" onclick="openTab(event, 'drink-menu')">‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡πâ‡∏≥</button>
            <input type="text" id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" onkeyup="searchMenu()">
        </div>
        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£ -->
        <div id="food-menu" class="menu">
            <div class="item" data-price="10"><div>‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏µ‡∏™ 10 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="10"><div>‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠ 10 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏õ‡∏•‡∏≤ 5 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏Å‡∏∏‡πâ‡∏á 5 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å 5 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡πÅ‡∏î‡∏á 5 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ô‡∏° 5 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="5"><div>‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏≠‡∏î 5 ‡∏ö‡∏≤‡∏ó</div></div>
        </div>
        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡πâ‡∏≥ -->
        <div id="drink-menu" class="menu" style="display:none;">
            <div class="item" data-price="10"><div>‡∏ô‡πâ‡∏≥‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß 10 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="10"><div>‡∏ô‡πâ‡∏≥‡πÅ‡∏õ‡πá‡∏ö‡∏ã‡∏µ‡πà 10 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="10"><div>‡∏ô‡πâ‡∏≥‡πÅ‡∏î‡∏á 10 ‡∏ö‡∏≤‡∏ó</div></div>
            <div class="item" data-price="10"><div>‡∏ô‡πâ‡∏≥‡∏≠‡∏á‡∏∏‡πà‡∏ô 10 ‡∏ö‡∏≤‡∏ó</div></div>
        </div>
     

        <div class="order-list" id="order-list">
            <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
            <div class="total" id="item-count">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: 0</div>
            <ul id="order-items"></ul>
            <div class="total" id="total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>
            <button class="payment-button" id="cash-button">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</button>
            <button class="payment-button" id="transfer-button">Qr Code</button>
        </div>
    </div>
</div>

<div class="notification" id="notification">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß!</div>

<div id="order-summary-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="close-modal">&times;</span>
        <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
        <ul id="summary-items"></ul>
        <div class="total" id="summary-total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>
        <div id="order-status" class="total">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå: <span id="status-text">‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</span></div>

    </div>
</div>

<!-- ‚ú® ‡πÄ‡∏û‡∏¥‡πà‡∏° Qr Code Modal -->
<div id="qr-modal" class="modal">
    <div class="modal-content">
        <span class="close-button" id="close-qr">&times;</span>
        <h2>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code</h2>
        <div class="qr-container">
            <img src="images/qr.jpg" alt="QR Code" style="width: 200px; display: block; margin: 20px auto;">
            <div class="total" id="qr-total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: 0 ‡∏ö‡∏≤‡∏ó</div>
            <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á -->
            <div id="countdown-timer" style="font-size: 20px; font-weight: bold; text-align: center;">10</div>
        </div>
        <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô <span id="countdown-text">/20</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
    </div>
</div>

<script>
    const orderList = [];
    const orderItems = document.getElementById('order-items');
    const totalElement = document.getElementById('total');
    const cashButton = document.getElementById('cash-button');
    const transferButton = document.getElementById('transfer-button');
    const notification = document.getElementById('notification');

    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    document.querySelectorAll('.item').forEach(item => {
        item.addEventListener('click', () => {
            const itemName = item.innerText;
            const itemPrice = parseFloat(item.getAttribute('data-price'));
            const existingItem = orderList.find(i => i.name === itemName);
            
            if (existingItem) {
                existingItem.quantity++;
                existingItem.totalPrice += itemPrice;
            } else {
                orderList.push({ name: itemName, price: itemPrice, quantity: 1, totalPrice: itemPrice });
            }

            updateOrderList();
            showNotification();
        });
    });

      // üîä ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏û‡∏π‡∏î
    function speak(text) {
        if ('speechSynthesis' in window) {
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'th-TH';
            window.speechSynthesis.speak(msg);
        }
    }

    function showNotification() {
        notification.style.display = 'block';
        setTimeout(() => { notification.style.display = 'none'; }, 2000);
    }

    function updateOrderList() {
        orderItems.innerHTML = '';
        let totalCount = 0;
        orderList.forEach((item, index) => {
            const orderItem = document.createElement('li');
            orderItem.className = 'order-item';
            orderItem.innerHTML = `
                <span>${item.name}</span>
                <span>${item.price} ‡∏ö‡∏≤‡∏ó x ${item.quantity}</span>
                <button class="add-remove-button" data-index="${index}" data-action="increase">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                <button class="add-remove-button" data-index="${index}" data-action="decrease">‡∏•‡∏î</button>
                <button class="remove-button" data-index="${index}">‡∏•‡∏ö</button>
            `;
            orderItems.appendChild(orderItem);
            totalCount += item.quantity;
        });

        totalElement.textContent = `‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${calculateTotalPrice()} ‡∏ö‡∏≤‡∏ó`;
        document.getElementById('item-count').textContent = `‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ${totalCount}`;

        // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏î
        document.querySelectorAll('.add-remove-button[data-index]').forEach(button => {
            button.addEventListener('click', () => {
                const index = parseInt(button.getAttribute('data-index'));
                const action = button.getAttribute('data-action');
                if (action === "increase") {
                    orderList[index].quantity++;
                } else {
                    if (orderList[index].quantity > 1) {
                        orderList[index].quantity--;
                    } else {
                        orderList.splice(index, 1);
                    }
                }
                orderList[index] && (orderList[index].totalPrice = orderList[index].quantity * orderList[index].price);
                updateOrderList();
            });
        });

        // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
        document.querySelectorAll('.remove-button').forEach(button => {
            button.addEventListener('click', () => {
                const index = parseInt(button.getAttribute('data-index'));
                orderList.splice(index, 1);
                updateOrderList();
            });
        });
    }

    function calculateTotalPrice() {
        return orderList.reduce((total, item) => total + item.totalPrice, 0);
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß
function saveOrderForStaff() {
    const orderId = `ORD-${Date.now()}`;
    const orderData = {
        id: orderId,
        items: [...orderList],
        total: calculateTotalPrice(),
        status: "pending",
        time: new Date().toLocaleString()
    };

    const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');
    existingOrders.push(orderData);
    localStorage.setItem('orders', JSON.stringify(existingOrders));
    loadQueue();  
    return orderId;   // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° return
}

function speakOrderDone(orderNumber) {
    const msg = new SpeechSynthesisUtterance(`‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà ${orderNumber} ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞`);
    msg.lang = "th-TH";
    msg.rate = 1;
    msg.pitch = 1;
    speechSynthesis.speak(msg);
}

function updateOrderStatus(orderId, status) {
    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
    const orderIndex = orders.findIndex(o => o.id === orderId);
    if (orderIndex !== -1) {
        orders[orderIndex].status = status;
        localStorage.setItem('orders', JSON.stringify(orders));

        const orderNumber = orderIndex + 1;
        if (status === "completed") {
            speakOrderDone(orderNumber);  // üîä ‡∏û‡∏π‡∏î‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß
        }
        loadQueue();
    }
}


function loadQueue() {
    const queueList = document.getElementById('queue-list');
    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
    queueList.innerHTML = '';

    if (orders.length === 0) {
        queueList.innerHTML = '<p style="text-align:center; color:#666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏¥‡∏ß</p>';
    } else {
        orders.forEach((order, i) => {
            const div = document.createElement('div');
            div.className = 'queue-item';
            div.setAttribute('id', order.id);          // ‚úÖ ‡πÉ‡∏™‡πà id
            div.setAttribute('data-number', i + 1);    // ‚úÖ ‡πÉ‡∏™‡πà‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß

            let statusText = '';
            let statusColor = '';
            if (order.status === "completed") {
                statusText = "‚úî ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß";
                statusColor = "green";
            } else if (order.status === "cancel") {
                statusText = "‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å";
                statusColor = "red";
            } else {
                statusText = "‚åõ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£";
                statusColor = "orange";
            }

            div.innerHTML = `
                <strong>#${i+1}</strong> ${order.time}<br>
                <span style="color:#333;">${order.items.map(it => it.name + 'x' + it.quantity).join(', ')}</span><br>
                <em>‡∏£‡∏ß‡∏° ${order.total} ‡∏ö‡∏≤‡∏ó</em><br>
                <span style="color:${statusColor}; font-weight:bold;">${statusText}</span>
            `;
            queueList.appendChild(div);
        });
    }
}



cashButton.addEventListener('click', () => {
    const totalPrice = calculateTotalPrice();
    if (confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ${totalPrice} ‡∏ö‡∏≤‡∏ó ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
        const orderId = saveOrderForStaff();   // ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ orderId
        alert('‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
        orderList.length = 0; 
        updateOrderList();
        updateOrderStatus(orderId, "completed");  // ‚úÖ ‡πÉ‡∏ä‡πâ orderId
    }
});

transferButton.addEventListener('click', () => {
    const totalPrice = calculateTotalPrice();
    if (confirm(`‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ${totalPrice} ‡∏ö‡∏≤‡∏ó ‡∏î‡πâ‡∏ß‡∏¢ Qr Code ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
        document.getElementById('qr-total').textContent = `‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ‡∏ø${totalPrice}`;
        document.getElementById('qr-modal').style.display = 'block';

        let timeLeft = 20;
        const countdownElement = document.getElementById('countdown-timer');
        const countdownText = document.getElementById('countdown-text');
        
        const orderId = saveOrderForStaff();   // ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ orderId

        const countdownInterval = setInterval(() => {
            timeLeft--;
            countdownElement.textContent = timeLeft;
            countdownText.textContent = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(countdownInterval);
                document.getElementById('qr-modal').style.display = 'none';
                orderList.length = 0; 
                updateOrderList(); 
                updateOrderStatus(orderId, "completed");  // ‚úÖ ‡πÉ‡∏ä‡πâ orderId
            }
        }, 1000);
    }
});



document.getElementById('close-qr').addEventListener('click', () => {
    document.getElementById('qr-modal').style.display = 'none';
});

    function openTab(evt, tabName) {
        const tabs = document.querySelectorAll('.menu');
        tabs.forEach(tab => tab.style.display = "none");
        document.getElementById(tabName).style.display = "grid";

        const tablinks = document.querySelectorAll('.tablink');
        tablinks.forEach(tablink => tablink.className = tablink.className.replace(" active", ""));
        evt.currentTarget.className += " active";
    }

    function searchMenu() {
        const input = document.getElementById('search').value.toLowerCase();
        const items = document.querySelectorAll('.item');
        items.forEach(item => {
            const text = item.innerText.toLowerCase();
            item.style.display = text.includes(input) ? "block" : "none";
        });
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏¥‡∏ß‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå
    function loadQueue() {
        const queueList = document.getElementById('queue-list');
        const orders = JSON.parse(localStorage.getItem('orders') || '[]');
        queueList.innerHTML = '';
        if (orders.length === 0) {
            queueList.innerHTML = '<p style="text-align:center; color:#666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏¥‡∏ß</p>';
        } else {
            orders.forEach((order, i) => {
                const div = document.createElement('div');
                div.className = 'queue-item';
                div.innerHTML = `
                    <strong>#${i+1}</strong> ${order.time}<br>
                    <span style="color:#333;">${order.items.map(it=> it.name + 'x' + it.quantity).join(', ')}</span><br>
                    <em>‡∏£‡∏ß‡∏° ${order.total} ‡∏ö‡∏≤‡∏ó</em>
                `;
                queueList.appendChild(div);
            });
        }
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏¥‡∏ß‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î + ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏ó‡∏∏‡∏Å 3 ‡∏ß‡∏¥
    window.onload = () => {
        loadQueue();
        setInterval(loadQueue, 1000);
    };

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏¥‡∏ß‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå
function loadQueue() {
    const queueList = document.getElementById('queue-list');
    const orders = JSON.parse(localStorage.getItem('orders') || '[]');
    queueList.innerHTML = '';

    if (orders.length === 0) {
        queueList.innerHTML = '<p style="text-align:center; color:#666;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏¥‡∏ß</p>';
    } else {
        orders.forEach((order, i) => {
            const div = document.createElement('div');
            div.className = 'queue-item';

            let statusText = '';
            let statusColor = '';
            if (order.status === "completed") {     // ‚úÖ ‡πÅ‡∏Å‡πâ‡∏à‡∏≤‡∏Å "done" ‚Üí "completed"
                statusText = "‚úî ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß";
                statusColor = "green";
            } else if (order.status === "cancel") {
                statusText = "‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å";
                statusColor = "red";
            } else {
                statusText = "‚åõ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£";
                statusColor = "orange";
            }

            div.innerHTML = `
                <strong>#${i+1}</strong> ${order.time}<br>
                <span style="color:#333;">${order.items.map(it => it.name + 'x' + it.quantity).join(', ')}</span><br>
                <em>‡∏£‡∏ß‡∏° ${order.total} ‡∏ö‡∏≤‡∏ó</em><br>
                <span style="color:${statusColor}; font-weight:bold;">${statusText}</span>
            `;
            queueList.appendChild(div);
        });
    }
}



</script>

</body>
</html>
>